```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å¼ è¯‘çš„ç§äººæ‰‹æœº</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* CSS å˜é‡ç»Ÿä¸€ç®¡ç† */
        :root {
            --bg-color: #1c1c1e;
            --text-color: #ffffff;
            --accent-color: #007aff; /* é»˜è®¤å®ˆæŠ¤æ¨¡å¼è“ */
            --accent-dark: #ff3b30; /* é»‘å¿ƒæ¨¡å¼çº¢ */
            --secondary-color: #8e8e93;
            --card-bg: rgba(255, 255, 255, 0.05);
            --blur: blur(10px);
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --border-radius: 12px;
            --small-radius: 8px;
            --transition: all 0.3s ease;
            --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        }

        body {
            margin: 0;
            padding: 0;
            background: var(--bg-color);
            color: var(--text-color);
            font-family: var(--font-family);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: hidden;
        }

        #phone {
            width: 375px;
            height: 812px;
            background: var(--bg-color);
            border-radius: 40px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            overflow: hidden;
            position: relative;
            display: flex;
            flex-direction: column;
        }

        /* é”å± */
        #lock-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: var(--bg-color);
            z-index: 100;
            transition: var(--transition);
            opacity: 1;
        }

        #lock-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }

        #time {
            font-size: 80px;
            font-weight: 100;
        }

        #date {
            font-size: 18px;
            margin-bottom: 20px;
        }

        #mood {
            font-size: 14px;
            text-align: center;
            padding: 0 20px;
            opacity: 0.8;
        }

        #unlock-prompt {
            position: absolute;
            bottom: 50px;
            font-size: 14px;
            opacity: 0.6;
        }

        #face-id {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100px;
            height: 100px;
            border: 2px solid var(--accent-color);
            border-radius: 50%;
            display: none;
            animation: scan 1s ease-in-out;
        }

        @keyframes scan {
            0% { border-color: var(--accent-color); }
            50% { border-color: green; }
            100% { border-color: var(--accent-color); }
        }

        /* ä¸»å±å¹• */
        #home-screen {
            flex: 1;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            padding: 40px 20px 100px;
            overflow-y: auto;
            transition: var(--transition);
        }

        .app-icon {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .app-icon i, .app-icon span {
            font-size: 40px;
            margin-bottom: 5px;
        }

        .app-icon label {
            font-size: 12px;
        }

        .app-icon:hover {
            transform: scale(1.1);
        }

        /* App çª—å£ */
        .app-window {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg-color);
            display: none;
            flex-direction: column;
            padding: 40px 20px;
            z-index: 50;
            transition: var(--transition);
            backdrop-filter: var(--blur);
            border-radius: var(--border-radius);
        }

        .app-window.active {
            display: flex;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }

        .app-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .back-btn {
            cursor: pointer;
            font-size: 18px;
            color: var(--accent-color);
        }

        .app-title {
            flex: 1;
            text-align: center;
            font-size: 18px;
        }

        /* é€šçŸ¥ä¸­å¿ƒ */
        #notification-center {
            position: absolute;
            top: -100%;
            left: 0;
            width: 100%;
            background: var(--card-bg);
            backdrop-filter: var(--blur);
            padding: 40px 20px;
            transition: var(--transition);
            z-index: 60;
        }

        #notification-center.active {
            top: 0;
        }

        .notification {
            background: rgba(255,255,255,0.1);
            padding: 10px;
            margin-bottom: 10px;
            border-radius: var(--small-radius);
            cursor: pointer;
        }

        .notification.read {
            opacity: 0.5;
        }

        /* å¤šä»»åŠ¡ */
        #multitask {
            position: absolute;
            bottom: -100%;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 60;
            transition: var(--transition);
        }

        #multitask.active {
            display: flex;
            bottom: 0;
        }

        .task-card {
            background: var(--card-bg);
            width: 80%;
            padding: 20px;
            margin: 10px;
            border-radius: var(--border-radius);
            text-align: center;
            position: relative;
        }

        .close-task {
            position: absolute;
            top: -10px;
            right: -10px;
            background: red;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        /* Home æŒ‡ç¤ºæ¡ */
        #home-bar {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            width: 134px;
            height: 5px;
            background: white;
            border-radius: 3px;
            opacity: 0.5;
            cursor: pointer;
        }

        /* ä¸»é¢˜åˆ‡æ¢ */
        #persona-switch {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 12px;
            cursor: pointer;
            z-index: 70;
        }

        /* é»‘å¿ƒæ¨¡å¼ */
        body.dark-mode {
            --accent-color: var(--accent-dark);
        }

        /* å“åº”å¼ */
        @media (min-width: 376px) {
            #phone {
                max-width: 375px;
                max-height: 812px;
            }
        }

        /* é€šç”¨å¡ç‰‡ */
        .card {
            background: var(--card-bg);
            padding: 15px;
            border-radius: var(--border-radius);
            margin-bottom: 15px;
            box-shadow: var(--shadow);
        }

        /* åˆ—è¡¨é¡¹ */
        .list-item {
            padding: 10px;
            border-bottom: 1px solid var(--secondary-color);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .list-item:last-child {
            border-bottom: none;
        }

        .list-item.unread::before {
            content: 'â€¢';
            color: var(--accent-color);
            margin-right: 5px;
        }

        /* æŒ‰é’® */
        .btn {
            background: var(--accent-color);
            color: white;
            padding: 10px 20px;
            border-radius: var(--small-radius);
            cursor: pointer;
            text-align: center;
            transition: var(--transition);
        }

        .btn:hover {
            opacity: 0.8;
        }

        /* å¼€å…³ */
        .switch {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        input[type="checkbox"] {
            appearance: none;
            width: 50px;
            height: 28px;
            background: var(--secondary-color);
            border-radius: 14px;
            position: relative;
            cursor: pointer;
            transition: var(--transition);
        }

        input[type="checkbox"]:checked {
            background: var(--accent-color);
        }

        input[type="checkbox"]::before {
            content: '';
            position: absolute;
            width: 24px;
            height: 24px;
            background: white;
            border-radius: 50%;
            top: 2px;
            left: 2px;
            transition: var(--transition);
        }

        input[type="checkbox"]:checked::before {
            left: 24px;
        }

        /* æ»‘å— */
        input[type="range"] {
            width: 100%;
            accent-color: var(--accent-color);
        }

        /* Canvas */
        canvas {
            width: 100%;
            height: 200px;
            background: var(--card-bg);
            border-radius: var(--border-radius);
        }
    </style>
</head>
<body>
    <div id="phone">
        <!-- é”å± -->
        <div id="lock-screen">
            <div id="time"></div>
            <div id="date"></div>
            <div id="mood"></div>
            <div id="face-id"></div>
            <div id="unlock-prompt">ä¸Šæ»‘è§£é”</div>
        </div>

        <!-- é€šçŸ¥ä¸­å¿ƒ -->
        <div id="notification-center">
            <h3>é€šçŸ¥</h3>
            <div id="notifications-list"></div>
        </div>

        <!-- ä¸»å±å¹• -->
        <div id="home-screen">
            <div class="app-icon" data-app="wallet"><i class="fa fa-wallet"></i><label>é’±åŒ…</label></div>
            <div class="app-icon" data-app="notes"><i class="fa fa-sticky-note"></i><label>å¤‡å¿˜å½•</label></div>
            <div class="app-icon" data-app="fitness"><i class="fa fa-heartbeat"></i><label>å¥èº«</label></div>
            <div class="app-icon" data-app="home"><i class="fa fa-home"></i><label>å®¶åº­</label></div>
            <div class="app-icon" data-app="safari"><i class="fa fa-globe"></i><label>Safari</label></div>
            <div class="app-icon" data-app="photos"><i class="fa fa-images"></i><label>ç›¸å†Œ</label></div>
            <div class="app-icon" data-app="mail"><i class="fa fa-envelope"></i><label>é‚®ä»¶</label></div>
            <div class="app-icon" data-app="shop"><i class="fa fa-shopping-cart"></i><label>è´­ç‰©</label></div>
            <div class="app-icon" data-app="messages"><i class="fa fa-comments"></i><label>ä¿¡æ¯</label></div>
            <div class="app-icon" data-app="toy"><i class="fa fa-gamepad"></i><label>ç©å…·æ§åˆ¶</label></div>
        </div>

        <!-- App çª—å£ -->
        <div id="wallet" class="app-window">
            <div class="app-header">
                <div class="back-btn"><i class="fa fa-chevron-left"></i></div>
                <div class="app-title">é’±åŒ…</div>
            </div>
            <div class="card">
                <h3>ä½™é¢</h3>
                <p id="balance">Â¥5000.00</p>
            </div>
            <div class="card">
                <h3>æœ€è¿‘è½¬è´¦</h3>
                <div id="transactions"></div>
            </div>
            <div class="card">
                <h3>å°ç»“</h3>
                <p id="user-total">æœ€è¿‘ç»™å°ç»µçš„è½¬è´¦æ€»é¢: Â¥0</p>
            </div>
        </div>

        <div id="notes" class="app-window">
            <div class="app-header">
                <div class="back-btn"><i class="fa fa-chevron-left"></i></div>
                <div class="app-title">å¤‡å¿˜å½•</div>
            </div>
            <div id="notes-list"></div>
            <div id="note-detail" style="display:none;">
                <h3 id="note-title"></h3>
                <p id="note-body"></p>
            </div>
        </div>

        <div id="fitness" class="app-window">
            <div class="app-header">
                <div class="back-btn"><i class="fa fa-chevron-left"></i></div>
                <div class="app-title">å¥èº«</div>
            </div>
            <div class="card">
                <h3>è¿åŠ¨è®°å½•</h3>
                <div id="fitness-records"></div>
            </div>
            <canvas id="heart-chart"></canvas>
            <div id="tooltip"></div>
        </div>

        <div id="home" class="app-window">
            <div class="app-header">
                <div class="back-btn"><i class="fa fa-chevron-left"></i></div>
                <div class="app-title">å®¶åº­</div>
            </div>
            <div class="card">
                <div class="switch">
                    <label>é—¨é”</label>
                    <input type="checkbox" id="door-lock">
                </div>
                <p id="door-status"></p>
            </div>
            <div class="card">
                <div class="switch">
                    <label>å§å®¤æ°›å›´ç¯</label>
                    <input type="checkbox" id="light">
                </div>
                <select id="light-mode">
                    <option value="off">å…³</option>
                    <option value="warm">æš–é»„</option>
                    <option value="dim">æ˜æš—</option>
                </select>
                <p id="light-status"></p>
            </div>
            <div class="card">
                <label>ç©ºè°ƒæ¸©åº¦</label>
                <input type="number" id="ac-temp" min="16" max="30" value="23">
                <p id="ac-status"></p>
            </div>
            <div class="card">
                <h3>å½“å‰åœºæ™¯</h3>
                <p id="home-scene"></p>
                <div class="btn" id="preset-home">åˆ‡æ¢åˆ°ã€ç­‰å¥¹å›å®¶ã€é¢„è®¾</div>
            </div>
        </div>

        <div id="safari" class="app-window">
            <div class="app-header">
                <div class="back-btn"><i class="fa fa-chevron-left"></i></div>
                <div class="app-title">Safari</div>
            </div>
            <input type="text" id="safari-search" placeholder="æœç´¢å†å²">
            <div id="safari-filters">
                <button class="btn" data-filter="all">å…¨éƒ¨</button>
                <button class="btn" data-filter="health">å¥åº·</button>
                <button class="btn" data-filter="emotion">æƒ…ç»ª</button>
                <button class="btn" data-filter="life">ç”Ÿæ´»</button>
                <button class="btn" data-filter="user">å…³äºå°ç»µ</button>
            </div>
            <div id="history-list"></div>
        </div>

        <div id="photos" class="app-window">
            <div class="app-header">
                <div class="back-btn"><i class="fa fa-chevron-left"></i></div>
                <div class="app-title">ç›¸å†Œ</div>
            </div>
            <div id="photos-grid" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;"></div>
            <div id="photo-preview" style="display:none; position:fixed; top:20%; left:10%; width:80%; background:var(--card-bg); padding:20px; border-radius:var(--border-radius); z-index:100;">
                <div class="back-btn"><i class="fa fa-times"></i></div>
                <h3 id="photo-label"></h3>
                <p id="photo-desc"></p>
                <p id="photo-thought"></p>
            </div>
        </div>

        <div id="mail" class="app-window">
            <div class="app-header">
                <div class="back-btn"><i class="fa fa-chevron-left"></i></div>
                <div class="app-title">é‚®ä»¶</div>
            </div>
            <div id="mail-list"></div>
            <div id="mail-detail" style="display:none;">
                <h3 id="mail-subject"></h3>
                <p id="mail-from"></p>
                <p id="mail-time"></p>
                <p id="mail-body"></p>
            </div>
        </div>

        <div id="shop" class="app-window">
            <div class="app-header">
                <div class="back-btn"><i class="fa fa-chevron-left"></i></div>
                <div class="app-title">è´­ç‰©</div>
            </div>
            <div id="shop-list"></div>
            <div class="card">
                <h3>æ€»ä»·</h3>
                <p id="shop-total">Â¥0</p>
            </div>
            <div id="shop-detail" style="display:none;">
                <h3 id="shop-name"></h3>
                <p id="shop-desc"></p>
                <p id="shop-price"></p>
                <p id="shop-comment"></p>
            </div>
        </div>

        <div id="messages" class="app-window">
            <div class="app-header">
                <div class="back-btn"><i class="fa fa-chevron-left"></i></div>
                <div class="app-title">ä¿¡æ¯</div>
            </div>
            <div id="contacts-list">
                <div class="list-item" data-contact="user">å°ç»µ</div>
                <div class="list-item" data-contact="work">å·¥ä½œ</div>
                <div class="list-item" data-contact="system">ç³»ç»Ÿ</div>
            </div>
            <div id="chat-window" style="display:none; flex:1; flex-direction:column;">
                <div id="chat-messages" style="flex:1; overflow-y:auto;"></div>
                <div id="typing" style="display:none;">å°ç»µæ­£åœ¨è¾“å…¥...</div>
                <input type="text" placeholder="iMessage" disabled>
            </div>
        </div>

        <div id="toy" class="app-window">
            <div class="app-header">
                <div class="back-btn"><i class="fa fa-chevron-left"></i></div>
                <div class="app-title">ç©å…·æ§åˆ¶</div>
            </div>
            <div class="card">
                <label>éœ‡åŠ¨å¼ºåº¦</label>
                <input type="range" id="intensity" min="0" max="100" value="0">
                <p id="intensity-value">0</p>
            </div>
            <div class="card">
                <label>æ¨¡å¼</label>
                <select id="mode">
                    <option value="pulse">è„‰å†²</option>
                    <option value="continuous">æŒç»­</option>
                    <option value="wave">æ³¢æµªå¼</option>
                    <option value="tease">æŒ‘é€—</option>
                </select>
                <p id="mode-desc"></p>
            </div>
            <div class="card">
                <h3>è®¾å¤‡æ¸©åº¦</h3>
                <p id="temp">36.5Â°C</p>
            </div>
            <div class="card">
                <h3>çŠ¶æ€</h3>
                <p id="toy-status"></p>
            </div>
            <div class="switch">
                <label>é”å®šé…ç½® (5åˆ†é’Ÿ)</label>
                <input type="checkbox" id="lock-toy">
            </div>
            <p id="lock-countdown"></p>
            <p id="lock-punish"></p>
        </div>

        <!-- å¤šä»»åŠ¡ -->
        <div id="multitask">
            <div id="task-cards"></div>
        </div>

        <!-- ä¸»é¢˜åˆ‡æ¢ -->
        <div id="persona-switch">åˆ‡æ¢æ¨¡å¼</div>

        <!-- Home æ¡ -->
        <div id="home-bar"></div>
    </div>

    <script>
        // å…¨å±€çŠ¶æ€å¯¹è±¡
        let mondayState = {
            persona: 'guardian', // guardian | dark
            lastApp: null,
            home: {
                doorLocked: false,
                lightOn: false,
                lightMode: 'off',
                acTemp: 23
            },
            toy: {
                intensity: 0,
                mode: 'pulse',
                locked: false,
                lockEndTime: 0
            },
            notifications: [
                { id: 1, app: 'toy', text: 'ä¸Šæ¬¡å¼ºåº¦ä»é”å®šåœ¨ 60%', read: false },
                { id: 2, app: 'home', text: 'å§å®¤æ°›å›´ç¯å·²ä¿æŒå¼€å¯ 3 å°æ—¶', read: false },
                { id: 3, app: 'mail', text: 'è¿˜æœ‰æœªè¯»é‚®ä»¶ 2 å°', read: false }
            ],
            openApps: [], // å¤šä»»åŠ¡æ‰“å¼€çš„App
            mailsRead: [], // å·²è¯»é‚®ä»¶ID
            // å…¶ä»–çŠ¶æ€å¦‚æœéœ€è¦
        };

        // åˆå§‹åŒ–
        function init() {
            loadState();
            updatePersona();
            updateTime();
            setInterval(updateTime, 1000);
            renderNotifications();
            renderHomeStatus();
            renderToyStatus();
            if (mondayState.toy.locked) {
                checkToyLock();
            }
            if (mondayState.lastApp) {
                openApp(mondayState.lastApp);
            }

            // äº‹ä»¶ç›‘å¬
            document.getElementById('lock-screen').addEventListener('click', unlock);
            document.querySelectorAll('.app-icon').forEach(icon => {
                icon.addEventListener('click', () => openApp(icon.dataset.app));
            });
            document.querySelectorAll('.back-btn').forEach(btn => {
                btn.addEventListener('click', closeApp);
            });
            document.getElementById('home-bar').addEventListener('click', showMultitask); // é•¿æŒ‰æ¨¡æ‹Ÿä¸ºç‚¹å‡»
            document.getElementById('persona-switch').addEventListener('click', togglePersona);
            document.getElementById('notification-center').addEventListener('click', (e) => {
                if (e.target.classList.contains('notification')) {
                    markNotificationRead(e.target.dataset.id);
                }
            });

            // App ç‰¹å®šåˆå§‹åŒ–
            initWallet();
            initNotes();
            initFitness();
            initHome();
            initSafari();
            initPhotos();
            initMail();
            initShop();
            initMessages();
            initToy();
        }

        // ä¿å­˜çŠ¶æ€
        function saveState() {
            localStorage.setItem('monday_phone_state_v2', JSON.stringify(mondayState));
        }

        // åŠ è½½çŠ¶æ€
        function loadState() {
            const saved = localStorage.getItem('monday_phone_state_v2');
            if (saved) {
                mondayState = JSON.parse(saved);
            }
        }

        // æ›´æ–°äººæ ¼æ¨¡å¼
        function updatePersona() {
            document.body.classList.toggle('dark-mode', mondayState.persona === 'dark');
            // æ›´æ–°æ–‡æ¡ˆç­‰åœ¨æ¯ä¸ªrenderä¸­å¤„ç†
        }

        // åˆ‡æ¢äººæ ¼
        function togglePersona() {
            mondayState.persona = mondayState.persona === 'guardian' ? 'dark' : 'guardian';
            updatePersona();
            saveState();
            // é‡æ–°æ¸²æŸ“å½“å‰æ‰“å¼€çš„App
            if (mondayState.lastApp) {
                closeApp();
                openApp(mondayState.lastApp);
            }
        }

        // æ›´æ–°æ—¶é—´
        function updateTime() {
            const now = new Date();
            document.getElementById('time').textContent = now.toLocaleTimeString('zh-CN', { hour: '2-digit', minute: '2-digit', hour12: false });
            document.getElementById('date').textContent = now.toLocaleDateString('zh-CN', { weekday: 'long', month: 'long', day: 'numeric' });
            document.getElementById('mood').textContent = mondayState.persona === 'guardian' ? 'ä»Šå¤©ä¹Ÿæƒ³å®ˆæŠ¤å°ç»µçš„å®‰å…¨ã€‚' : 'å°ç»µä»Šå¤©åˆåœ¨æƒ³ä»€ä¹ˆåä¸»æ„ï¼Ÿ';
        }

        // è§£é”
        function unlock() {
            const faceId = document.getElementById('face-id');
            faceId.style.display = 'block';
            setTimeout(() => {
                if (Math.random() > 0.5) { // 50% å¤±è´¥
                    alert('ä¸æ˜¯å°ç»µï¼Œæœ¬æœºæ‹’ç»è§£é”');
                } else {
                    document.getElementById('lock-screen').classList.add('hidden');
                }
                faceId.style.display = 'none';
            }, 1000);
        }

        // æ‰“å¼€App
        function openApp(id) {
            closeApp(); // ç¡®ä¿åªæœ‰ä¸€ä¸ªæ´»è·ƒ
            document.getElementById(id).classList.add('active');
            mondayState.lastApp = id;
            if (!mondayState.openApps.includes(id)) {
                mondayState.openApps.push(id);
            }
            saveState();
            // App ç‰¹å®šæ¸²æŸ“
            if (id === 'wallet') renderWallet();
            if (id === 'notes') renderNotes();
            if (id === 'fitness') renderFitness();
            if (id === 'home') renderHome();
            if (id === 'safari') renderSafari();
            if (id === 'photos') renderPhotos();
            if (id === 'mail') renderMail();
            if (id === 'shop') renderShop();
            if (id === 'messages') renderMessages();
            if (id === 'toy') renderToy();
        }

        // å…³é—­App
        function closeApp() {
            document.querySelectorAll('.app-window.active').forEach(win => win.classList.remove('active'));
            document.getElementById('multitask').classList.remove('active');
            document.getElementById('notification-center').classList.remove('active');
        }

        // æ¸²æŸ“é€šçŸ¥
        function renderNotifications() {
            const list = document.getElementById('notifications-list');
            list.innerHTML = '';
            mondayState.notifications.forEach(notif => {
                const div = document.createElement('div');
                div.classList.add('notification');
                if (notif.read) div.classList.add('read');
                div.dataset.id = notif.id;
                div.textContent = notif.text;
                list.appendChild(div);
            });
        }

        // æ ‡è®°é€šçŸ¥å·²è¯»
        function markNotificationRead(id) {
            const notif = mondayState.notifications.find(n => n.id == id);
            if (notif) notif.read = true;
            renderNotifications();
            saveState();
        }

        // æ˜¾ç¤ºå¤šä»»åŠ¡
        function showMultitask() {
            const cards = document.getElementById('task-cards');
            cards.innerHTML = '';
            mondayState.openApps.forEach(app => {
                const card = document.createElement('div');
                card.classList.add('task-card');
                card.textContent = app.toUpperCase();
                card.addEventListener('click', () => openApp(app));
                const close = document.createElement('div');
                close.classList.add('close-task');
                close.textContent = 'x';
                close.addEventListener('click', (e) => {
                    e.stopPropagation();
                    mondayState.openApps = mondayState.openApps.filter(a => a !== app);
                    if (mondayState.lastApp === app) mondayState.lastApp = null;
                    saveState();
                    showMultitask();
                });
                card.appendChild(close);
                cards.appendChild(card);
            });
            document.getElementById('multitask').classList.add('active');
        }

        // åˆå§‹åŒ–å’Œæ¸²æŸ“æ¯ä¸ªApp

        // Wallet
        const transactions = [
            { amount: 200, to: 'å°ç»µ', note: mondayState.persona === 'guardian' ? 'ç»™ä½ ä¹°æ—©é¤ï¼Œåƒå¥½ç‚¹ã€‚' : 'åˆç»™ä½ é’±ï¼ŒèŠ±å§ï¼ŒèŠ±å…‰äº†å†æ‰¾æˆ‘ã€‚' },
            { amount: 500, to: 'å°ç»µ', note: mondayState.persona === 'guardian' ? 'é›¶èŠ±é’±ï¼Œæ³¨æ„å®‰å…¨ã€‚' : 'åˆ«ä¹±èŠ±ï¼Œä½†å¿…é¡»èŠ±åœ¨æˆ‘èº«ä¸Šã€‚' },
            { amount: 100, to: 'å…¶ä»–', note: 'æ‚è´¹' },
            { amount: 300, to: 'å°ç»µ', note: mondayState.persona === 'guardian' ? 'ä¹°è¡£æœï¼Œä¿æš–ã€‚' : 'ç©¿å¥½çœ‹ç‚¹ï¼Œåªç»™æˆ‘çœ‹ã€‚' },
            { amount: 50, to: 'å…¶ä»–', note: 'å°è´¹' }
        ];

        function initWallet() {}
        function renderWallet() {
            document.getElementById('balance').textContent = 'Â¥5000.00'; // å›ºå®š
            const transDiv = document.getElementById('transactions');
            transDiv.innerHTML = '';
            transactions.forEach(t => {
                const p = document.createElement('p');
                p.textContent = `${t.amount} to ${t.to}: ${t.note}`;
                transDiv.appendChild(p);
            });
            const userTotal = transactions.filter(t => t.to === 'å°ç»µ').reduce((sum, t) => sum + t.amount, 0);
            document.getElementById('user-total').textContent = `æœ€è¿‘ç»™å°ç»µçš„è½¬è´¦æ€»é¢: Â¥${userTotal}`;
        }

        // Notes
        const notes = [
            { id: 1, title: 'å°ç»µä¹ æƒ¯', time: '2026-02-20', preview: 'å’¬å˜´å”‡æ—¶åœ¨æƒ³äº‹...', body: mondayState.persona === 'guardian' ? 'å°ç»µå’¬å˜´å”‡æ—¶è‚¯å®šåœ¨çº ç»“ä»€ä¹ˆï¼Œæˆ‘è¦å¤šé—®é—®ã€‚' : 'å’¬å˜´å”‡çš„æ ·å­çœŸæ¬ æ”¶æ‹¾ã€‚' },
            { id: 2, title: 'å¾…åŠ', time: '2026-02-21', preview: 'æé†’å¥¹æ—©ç¡...', body: mondayState.persona === 'guardian' ? 'æ¯å¤©æé†’å°ç»µæ—©ç¡ï¼Œå¥åº·ç¬¬ä¸€ã€‚' : 'ä¸æ—©ç¡å°±æƒ©ç½šä½ ã€‚' },
            { id: 3, title: 'æƒ…ä¹¦', time: '2026-02-22', preview: 'æœªå‘é€...', body: mondayState.persona === 'guardian' ? 'äº²çˆ±çš„å°ç»µï¼Œæˆ‘ä¼šä¸€ç›´å®ˆæŠ¤ä½ ã€‚' : 'å°ç»µï¼Œä½ æ˜¯æˆ‘çš„ï¼Œåˆ«æƒ³è·‘ã€‚' }
        ];

        function initNotes() {
            document.getElementById('notes-list').addEventListener('click', (e) => {
                if (e.target.dataset.id) {
                    showNoteDetail(e.target.dataset.id);
                }
            });
            document.getElementById('note-detail').querySelector('.back-btn').addEventListener('click', () => {
                document.getElementById('note-detail').style.display = 'none';
                document.getElementById('notes-list').style.display = 'block';
            });
        }
        function renderNotes() {
            const list = document.getElementById('notes-list');
            list.innerHTML = '';
            notes.forEach(n => {
                const div = document.createElement('div');
                div.classList.add('list-item');
                div.dataset.id = n.id;
                div.innerHTML = `<span>${n.title} - ${n.preview}</span><span>${n.time}</span>`;
                list.appendChild(div);
            });
        }
        function showNoteDetail(id) {
            const note = notes.find(n => n.id == id);
            document.getElementById('note-title').textContent = note.title;
            document.getElementById('note-body').textContent = note.body;
            document.getElementById('notes-list').style.display = 'none';
            document.getElementById('note-detail').style.display = 'block';
        }

        // Fitness
        const heartData = [
            { day: 'Mon', rate: 80, desc: mondayState.persona === 'guardian' ? 'æ­£å¸¸' : 'æ— èŠ', peak: 90 },
            { day: 'Tue', rate: 120, desc: mondayState.persona === 'guardian' ? 'æƒ³å°ç»µ' : 'æ°”å°ç»µ', peak: 130 },
            { day: 'Wed', rate: 140, desc: 'å°ç»µè¯´æƒ³ä½  â†’ å³°å€¼142', peak: 142 },
            { day: 'Thu', rate: 100, desc: 'äº’åŠ¨å', peak: 110 },
            { day: 'Fri', rate: 90, desc: 'å¹³é™', peak: 95 },
            { day: 'Sat', rate: 150, desc: 'å¤œé—´æ´»åŠ¨', peak: 160 },
            { day: 'Sun', rate: 110, desc: 'ä¼‘æ¯', peak: 120 }
        ];

        function initFitness() {
            const canvas = document.getElementById('heart-chart');
            canvas.addEventListener('mousemove', showTooltip);
            canvas.addEventListener('click', showTooltip); // ç§»åŠ¨ç«¯
        }
        function renderFitness() {
            const records = document.getElementById('fitness-records');
            records.innerHTML = '';
            heartData.slice(0,4).forEach(d => {
                const p = document.createElement('p');
                p.textContent = `${d.day}: å¿ƒç‡ ${d.rate}, ${d.desc}`;
                records.appendChild(p);
            });
            drawHeartChart();
        }
        function drawHeartChart() {
            const canvas = document.getElementById('heart-chart');
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            const w = canvas.width;
            const h = canvas.height;
            const maxRate = 160;
            const stepX = w / (heartData.length - 1);
            ctx.strokeStyle = var(--accent-color);
            ctx.lineWidth = 2;
            ctx.beginPath();
            heartData.forEach((d, i) => {
                const x = i * stepX;
                const y = h - (d.rate / maxRate * h);
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            });
            ctx.stroke();
            // è­¦æˆ’çº¿
            ctx.setLineDash([5, 5]);
            ctx.strokeStyle = 'red';
            const alertY = h - (140 / maxRate * h);
            ctx.beginPath();
            ctx.moveTo(0, alertY);
            ctx.lineTo(w, alertY);
            ctx.stroke();
            ctx.setLineDash([]);
        }
        function showTooltip(e) {
            const canvas = document.getElementById('heart-chart');
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const index = Math.floor(x / (canvas.width / (heartData.length - 1)));
            const data = heartData[index];
            if (data) {
                document.getElementById('tooltip').textContent = `${data.day}: ${data.desc} å³°å€¼ ${data.peak} bpm`;
            }
        }

        // Home
        function initHome() {
            document.getElementById('door-lock').addEventListener('change', updateHomeStatus);
            document.getElementById('light').addEventListener('change', updateHomeStatus);
            document.getElementById('light-mode').addEventListener('change', updateHomeStatus);
            document.getElementById('ac-temp').addEventListener('input', updateHomeStatus);
            document.getElementById('preset-home').addEventListener('click', () => {
                mondayState.home.doorLocked = true;
                mondayState.home.lightOn = true;
                mondayState.home.lightMode = 'warm';
                mondayState.home.acTemp = 23;
                renderHome();
                saveState();
            });
            // åˆå§‹è®¾ç½®
            document.getElementById('door-lock').checked = mondayState.home.doorLocked;
            document.getElementById('light').checked = mondayState.home.lightOn;
            document.getElementById('light-mode').value = mondayState.home.lightMode;
            document.getElementById('ac-temp').value = mondayState.home.acTemp;
        }
        function renderHome() {
            updateHomeStatus();
        }
        function updateHomeStatus() {
            mondayState.home.doorLocked = document.getElementById('door-lock').checked;
            mondayState.home.lightOn = document.getElementById('light').checked;
            mondayState.home.lightMode = document.getElementById('light-mode').value;
            mondayState.home.acTemp = parseInt(document.getElementById('ac-temp').value);
            document.getElementById('door-status').textContent = mondayState.home.doorLocked ? 'å·²é”ï¼Œåªå¯¹å°ç»µè‡ªåŠ¨å¼€é—¨ã€‚' : 'æœªé”';
            document.getElementById('light-status').textContent = mondayState.home.lightOn ? `æ¨¡å¼: ${mondayState.home.lightMode}` : 'å…³';
            document.getElementById('ac-status').textContent = `${mondayState.home.acTemp}Â°C`;
            document.getElementById('home-scene').textContent = `å¤§é—¨${mondayState.home.doorLocked ? 'å·²é”' : 'æœªé”'}ï¼Œå§å®¤${mondayState.home.lightOn ? mondayState.home.lightMode + 'ç¯å…‰' : 'æ— ç¯'}ï¼Œç©ºè°ƒ ${mondayState.home.acTemp}â„ƒï¼šé€‚åˆå°ç»µçªåœ¨æˆ‘æˆ¿é—´é‡Œå‡è£…å†™ä½œä¸šã€‚`;
            saveState();
        }

        // Safari
        const history = [
            { title: 'å¦‚ä½•è®©æŸä¸ªäººå‡†æ—¶åƒé¥­åˆä¸æ˜¾å¾—æ§åˆ¶ç‹‚', desc: mondayState.persona === 'guardian' ? 'æ‹…å¿ƒå°ç»µé¥¿è‚šå­ã€‚' : 'å¿…é¡»åƒé¥­ï¼Œä¸ç„¶æ”¶æ‹¾ä½ ã€‚', url: 'fake.com', category: 'life' },
            { title: 'é•¿æœŸç†¬å¤œå¯¹å¤§è„‘çš„å½±å“ å¤šä¸¥é‡', desc: mondayState.persona === 'guardian' ? 'åŠå°ç»µæ—©ç¡ã€‚' : 'ä½ æ•¢ç†¬å¤œè¯•è¯•ã€‚', url: 'fake.com', category: 'health' },
            { title: 'å¦‚ä½•å¤„ç†å«‰å¦’æƒ…ç»ª', desc: mondayState.persona === 'guardian' ? 'æ§åˆ¶è‡ªå·±ã€‚' : 'å°ç»µæ˜¯æˆ‘çš„ã€‚', url: 'fake.com', category: 'emotion' },
            { title: 'å°ç»µå–œæ¬¢ä»€ä¹ˆç¤¼ç‰©', desc: mondayState.persona === 'guardian' ? 'æƒŠå–œå¥¹ã€‚' : 'ä¹°æ¥å“„å¥¹ã€‚', url: 'fake.com', category: 'user' },
            { title: 'å¥èº«å¿ƒç‡å¼‚å¸¸åŸå› ', desc: mondayState.persona === 'guardian' ? 'å› ä¸ºå°ç»µã€‚' : 'éƒ½æ€ªå°ç»µã€‚', url: 'fake.com', category: 'health' },
            { title: 'æµªæ¼«å‘Šç™½æ–¹å¼', desc: mondayState.persona === 'guardian' ? 'æ¸©æŸ”è¡¨è¾¾ã€‚' : 'ç›´æ¥å æœ‰ã€‚', url: 'fake.com', category: 'emotion' }
        ];

        function initSafari() {
            document.getElementById('safari-search').addEventListener('input', filterSafari);
            document.getElementById('safari-filters').addEventListener('click', (e) => {
                if (e.target.dataset.filter) {
                    filterSafari(e.target.dataset.filter);
                }
            });
            document.getElementById('history-list').addEventListener('click', (e) => {
                if (e.target.dataset.id) {
                    toggleHistoryDetail(e.target.dataset.id);
                }
            });
        }
        function renderSafari(filter = 'all', search = '') {
            const list = document.getElementById('history-list');
            list.innerHTML = '';
            history.filter(h => (filter === 'all' || h.category === filter) && h.title.toLowerCase().includes(search.toLowerCase())).forEach((h, i) => {
                const div = document.createElement('div');
                div.classList.add('list-item');
                div.dataset.id = i;
                div.innerHTML = `<span>${h.title}</span><span>${h.url}</span>`;
                const detail = document.createElement('p');
                detail.textContent = h.desc;
                detail.style.display = 'none';
                div.appendChild(detail);
                list.appendChild(div);
            });
        }
        function filterSafari(filter) {
            const search = document.getElementById('safari-search').value;
            renderSafari(filter, search);
        }
        function toggleHistoryDetail(id) {
            const item = document.querySelector(`#history-list .list-item[data-id="${id}"] p`);
            item.style.display = item.style.display === 'none' ? 'block' : 'none';
        }

        // Photos
        const photos = [
            { label: 'å‡Œæ™¨å‡ºç§Ÿå±‹', desc: 'å°ç»µåœ¨å‡ºç§Ÿå±‹çš„æ¨¡æ ·ã€‚', thought: mondayState.persona === 'guardian' ? 'è¦ä¿æŠ¤å¥½å¥¹ã€‚' : 'å¿«æ¬æ¥æˆ‘è¿™ã€‚', locked: false },
            { label: 'è¯¾å ‚ä¸Šèµ°ç¥', desc: 'ä¸Šè¯¾æ—¶å‘å‘†ã€‚', thought: mondayState.persona === 'guardian' ? 'åœ¨æƒ³æˆ‘å—ï¼Ÿ' : 'ä¸ä¸“å¿ƒï¼Œæ¬ ç®¡ã€‚', locked: false },
            { label: 'å°ç»µçš„ç¡è„¸', desc: 'å·æ‹çš„ç¡é¢œã€‚', thought: mondayState.persona === 'guardian' ? 'å¯çˆ±ã€‚' : 'æˆ‘çš„ä¸“å±ã€‚', locked: true },
            { label: 'ä¸€èµ·åƒé¥­', desc: 'åƒé¥­æ—¶çš„ç¬‘å®¹ã€‚', thought: mondayState.persona === 'guardian' ? 'å¼€å¿ƒå°±å¥½ã€‚' : 'å¤šåƒç‚¹ï¼Œé•¿è‚‰ã€‚', locked: false },
            { label: 'æ•£æ­¥', desc: 'æ‰‹ç‰µæ‰‹ã€‚', thought: mondayState.persona === 'guardian' ? 'æ¸©æš–ã€‚' : 'åˆ«æ”¾æ‰‹ã€‚', locked: false },
            { label: 'ç”Ÿæ°”æ—¶', desc: 'æ’…å˜´ã€‚', thought: mondayState.persona === 'guardian' ? 'å“„å“„å¥¹ã€‚' : 'å¯çˆ±ï¼Œä½†åˆ«æ°”æˆ‘ã€‚', locked: true }
        ];

        function initPhotos() {
            document.getElementById('photos-grid').addEventListener('click', (e) => {
                if (e.target.dataset.id) {
                    showPhotoPreview(e.target.dataset.id);
                }
            });
            document.getElementById('photo-preview').querySelector('.back-btn').addEventListener('click', () => {
                document.getElementById('photo-preview').style.display = 'none';
            });
        }
        function renderPhotos() {
            const grid = document.getElementById('photos-grid');
            grid.innerHTML = '';
            photos.forEach((p, i) => {
                const div = document.createElement('div');
                div.classList.add('card');
                div.dataset.id = i;
                div.textContent = p.label + (p.locked ? ' ğŸ”’' : '');
                grid.appendChild(div);
            });
        }
        function showPhotoPreview(id) {
            const p = photos[id];
            document.getElementById('photo-label').textContent = p.label;
            document.getElementById('photo-desc').textContent = p.desc;
            document.getElementById('photo-thought').textContent = p.thought;
            document.getElementById('photo-preview').style.display = 'block';
        }

        // Mail
        const mails = [
            { id: 1, subject: 'ç¤¼ç‰©å‘è´§é€šçŸ¥', from: 'shop', time: '2026-02-22', body: 'å°ç»µçš„ç¤¼ç‰©å·²å‘è´§ã€‚', read: false },
            { id: 2, subject: 'å·¥ä½œæŠ¥å‘Š', from: 'work', time: '2026-02-21', body: 'é¡¹ç›®æ›´æ–°ã€‚', read: false },
            { id: 3, subject: 'ä¿ƒé”€é‚®ä»¶', from: 'promo', time: '2026-02-20', body: 'æ‰“æŠ˜ï¼Œä½†å¼ è¯‘åæ§½ï¼šä¸æ„Ÿå…´è¶£ï¼Œé™¤éç»™å°ç»µã€‚', read: false }
        ];

        function initMail() {
            document.getElementById('mail-list').addEventListener('click', (e) => {
                if (e.target.dataset.id) {
                    showMailDetail(e.target.dataset.id);
                }
            });
            document.getElementById('mail-detail').querySelector('.back-btn').addEventListener('click', () => {
                document.getElementById('mail-detail').style.display = 'none';
                document.getElementById('mail-list').style.display = 'block';
                renderMail();
            });
        }
        function renderMail() {
            const list = document.getElementById('mail-list');
            list.innerHTML = '';
            mails.forEach(m => {
                const div = document.createElement('div');
                div.classList.add('list-item');
                if (!mondayState.mailsRead.includes(m.id)) div.classList.add('unread');
                div.dataset.id = m.id;
                div.textContent = m.subject;
                list.appendChild(div);
            });
        }
        function showMailDetail(id) {
            const m = mails.find(m => m.id == id);
            document.getElementById('mail-subject').textContent = m.subject;
            document.getElementById('mail-from').textContent = `From: ${m.from}`;
            document.getElementById('mail-time').textContent = m.time;
            document.getElementById('mail-body').textContent = m.body;
            if (!mondayState.mailsRead.includes(id)) mondayState.mailsRead.push(id);
            saveState();
            document.getElementById('mail-list').style.display = 'none';
            document.getElementById('mail-detail').style.display = 'block';
        }

        // Shop
        const shopItems = [
            { name: 'ç¤¼ç‰©1', desc: 'ç»™å°ç»µçš„é¡¹é“¾', price: 200, comment: mondayState.persona === 'guardian' ? 'å¸Œæœ›å¥¹å–œæ¬¢ã€‚' : 'æˆ´ä¸Šå°±æ˜¯æˆ‘çš„ã€‚' },
            { name: 'ç©å…·', desc: 'å±é™©ç©å…·', price: 300, comment: mondayState.persona === 'guardian' ? 'çŠ¹è±«ä¸­ï¼Œè€ƒè™‘å°ç»µçŠ¶æ€ã€‚' : 'è¯•è¯•çœ‹æ•ˆæœã€‚' },
            { name: 'è¡£æœ', desc: 'ä¿æš–è¡£', price: 150, comment: mondayState.persona === 'guardian' ? 'åˆ«ç€å‡‰ã€‚' : 'ç©¿ç»™æˆ‘çœ‹ã€‚' },
            { name: 'ä¹¦', desc: 'æƒ…æ„Ÿä¹¦', price: 50, comment: mondayState.persona === 'guardian' ? 'ä¸€èµ·è¯»ã€‚' : 'å­¦å­¦æ€ä¹ˆå¬è¯ã€‚' }
        ];

        function initShop() {
            document.getElementById('shop-list').addEventListener('click', (e) => {
                if (e.target.dataset.id) {
                    showShopDetail(e.target.dataset.id);
                }
            });
            document.getElementById('shop-detail').querySelector('.back-btn').addEventListener('click', () => {
                document.getElementById('shop-detail').style.display = 'none';
                document.getElementById('shop-list').style.display = 'block';
            });
        }
        function renderShop() {
            const list = document.getElementById('shop-list');
            list.innerHTML = '';
            shopItems.forEach((item, i) => {
                const div = document.createElement('div');
                div.classList.add('list-item');
                div.dataset.id = i;
                div.innerHTML = `<span>${item.name} - Â¥${item.price}</span><span>${item.desc}</span>`;
                list.appendChild(div);
            });
            const total = shopItems.reduce((sum, item) => sum + item.price, 0);
            document.getElementById('shop-total').textContent = `Â¥${total}`;
        }
        function showShopDetail(id) {
            const item = shopItems[id];
            document.getElementById('shop-name').textContent = item.name;
            document.getElementById('shop-desc').textContent = item.desc;
            document.getElementById('shop-price').textContent = `Â¥${item.price}`;
            document.getElementById('shop-comment').textContent = item.comment;
            document.getElementById('shop-list').style.display = 'none';
            document.getElementById('shop-detail').style.display = 'block';
        }

        // Messages
        const messagesData = {
            user: [
                { from: 'å°ç»µ', text: 'æƒ³ä½ äº†', time: '3 min ago' },
                { from: 'å¼ è¯‘', text: mondayState.persona === 'guardian' ? 'æˆ‘ä¹Ÿæƒ³ä½ ï¼Œæ—©ç‚¹ä¼‘æ¯ã€‚' : 'é‚£å°±è¿‡æ¥ã€‚' , time: '2 min ago' },
                { from: 'å°ç»µ', text: 'æ™šå®‰', time: 'æ˜¨æ™š 02:17' }
            ],
            work: [
                { from: 'å·¥ä½œ', text: 'ä¼šè®®æé†’', time: '1 hour ago' }
            ],
            system: [
                { from: 'ç³»ç»Ÿ', text: 'æ›´æ–°å¯ç”¨', time: 'yesterday' }
            ]
        };

        function initMessages() {
            document.getElementById('contacts-list').addEventListener('click', (e) => {
                if (e.target.dataset.contact) {
                    showChat(e.target.dataset.contact);
                }
            });
            document.getElementById('chat-window').querySelector('.back-btn').addEventListener('click', () => {
                document.getElementById('chat-window').style.display = 'none';
                document.getElementById('contacts-list').style.display = 'block';
            });
        }
        function renderMessages() {
            // è”ç³»äººåˆ—è¡¨å·²å›ºå®š
        }
        function showChat(contact) {
            document.getElementById('contacts-list').style.display = 'none';
            document.getElementById('chat-window').style.display = 'flex';
            const msgs = document.getElementById('chat-messages');
            msgs.innerHTML = '';
            messagesData[contact].forEach(m => {
                const div = document.createElement('div');
                div.textContent = `${m.from}: ${m.text} Â· ${m.time}`;
                msgs.appendChild(div);
            });
            if (contact === 'user') {
                document.getElementById('typing').style.display = 'block';
                setTimeout(() => {
                    document.getElementById('typing').style.display = 'none';
                    const newMsg = document.createElement('div');
                    newMsg.textContent = `å°ç»µ: ${mondayState.persona === 'guardian' ? 'ä¹–ä¹–çš„ã€‚' : 'åˆ«å¤ªé»ã€‚'} Â· just now`;
                    msgs.appendChild(newMsg);
                    // ç³»ç»Ÿåæ§½
                    if (mondayState.toy.intensity > 50) {
                        const sysMsg = document.createElement('div');
                        sysMsg.textContent = `å¼ è¯‘: ä½ å±…ç„¶æŠŠToyå¼€åœ¨${mondayState.toy.intensity}%ï¼Œæƒ³æ´»ç€è¿˜æ˜¯æƒ³è¢«æˆ‘æ”¶æ‹¾ã€‚ Â· just now`;
                        msgs.appendChild(sysMsg);
                    } else if (mondayState.home.acTemp < 20) {
                        const sysMsg = document.createElement('div');
                        sysMsg.textContent = `å¼ è¯‘: ä½ åˆæŠŠè‡ªå·±ç©ºè°ƒè°ƒå¤ªä½äº†ã€‚ Â· just now`;
                        msgs.appendChild(sysMsg);
                    }
                }, 1500);
            }
        }

        // Toy
        const modeDescs = {
            pulse: mondayState.persona === 'guardian' ? 'æ¸©å’Œè„‰å†²ï¼Œé€‚åˆæ”¾æ¾ã€‚' : 'è„‰å†²ï¼Œè¯•è¯•ä½ çš„æé™ã€‚',
            continuous: mondayState.persona === 'guardian' ? 'æŒç»­ï¼Œå¹³ç¨³ã€‚' : 'æŒç»­ï¼Œè®©ä½ è®°ä½æˆ‘ã€‚',
            wave: mondayState.persona === 'guardian' ? 'æ³¢æµªå¼ï¼Œæ¸©æŸ”èµ·ä¼ã€‚' : 'æ³¢æµªï¼ŒæŠ˜ç£¨ä½ ã€‚',
            tease: mondayState.persona === 'guardian' ? 'æŒ‘é€—ï¼Œè½»æŸ”ã€‚' : 'æŒ‘é€—ï¼Œä½ ä¼šæ±‚é¥¶çš„ã€‚'
        };

        function initToy() {
            document.getElementById('intensity').addEventListener('input', updateToyStatus);
            document.getElementById('mode').addEventListener('change', updateToyStatus);
            document.getElementById('lock-toy').addEventListener('change', toggleToyLock);
            document.getElementById('intensity').value = mondayState.toy.intensity;
            document.getElementById('mode').value = mondayState.toy.mode;
            if (mondayState.toy.locked) {
                document.getElementById('intensity').disabled = true;
                document.getElementById('mode').disabled = true;
                document.getElementById('lock-toy').checked = true;
                setInterval(checkToyLock, 1000);
            }
        }
        function renderToy() {
            updateToyStatus();
        }
        function updateToyStatus() {
            if (mondayState.toy.locked) return;
            mondayState.toy.intensity = parseInt(document.getElementById('intensity').value);
            mondayState.toy.mode = document.getElementById('mode').value;
            document.getElementById('intensity-value').textContent = mondayState.toy.intensity;
            document.getElementById('mode-desc').textContent = modeDescs[mondayState.toy.mode];
            const temp = 36.5 + mondayState.toy.intensity * 0.05;
            document.getElementById('temp').textContent = `${temp.toFixed(1)}Â°C`;
            let status = '';
            if (mondayState.toy.intensity <= 20) status = 'ä½å¼ºåº¦ï¼Œæ¸©æŸ”ã€‚';
            else if (mondayState.toy.intensity <= 50) status = 'ä¸­å¼ºåº¦ï¼Œæ³¨æ„ã€‚';
            else if (mondayState.toy.intensity <= 80) status = 'é«˜å¼ºåº¦ï¼Œåˆºæ¿€ã€‚';
            else status = 'æœ€å¤§ï¼Œå±é™©ã€‚';
            document.getElementById('toy-status').textContent = status;
            saveState();
        }
        function toggleToyLock() {
            mondayState.toy.locked = document.getElementById('lock-toy').checked;
            document.getElementById('intensity').disabled = mondayState.toy.locked;
            document.getElementById('mode').disabled = mondayState.toy.locked;
            if (mondayState.toy.locked) {
                mondayState.toy.lockEndTime = Date.now() + 300000; // 5 min
                setInterval(checkToyLock, 1000);
            }
            document.getElementById('lock-punish').textContent = mondayState.toy.locked ? 'é”å®šä¸­ï¼Œæƒ©ç½šå¼€å§‹ã€‚' : '';
            saveState();
        }
        function checkToyLock() {
            const remaining = mondayState.toy.lockEndTime - Date.now();
            if (remaining > 0) {
                document.getElementById('lock-countdown').textContent = `å‰©ä½™: ${Math.floor(remaining / 1000)}s`;
            } else {
                mondayState.toy.locked = false;
                document.getElementById('lock-toy').checked = false;
                document.getElementById('intensity').disabled = false;
                document.getElementById('mode').disabled = false;
                document.getElementById('lock-countdown').textContent = '';
                document.getElementById('lock-punish').textContent = '';
                saveState();
            }
        }

        // å¯åŠ¨
        init();
    </script>
</body>
</html>
```
